<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>  Getting SVGWeb Load Events to Fire Consistently |  Camel Cases</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
<header class="site-header">
  <div class="top-bar">
    <div class="wrapper">
      <h1 class="branding"><a href="/">camelCases</a></h1>
      <nav class="main-nav" role="navigation">
        <ul>
          <li class=""><a href="/">Articles</a></li>
          <li class=""><a href="/snippets">Snippets</a></li>
          <li class=""><a href="/about">About</a></li>
        </ul>
      </nav>
    </div>
  </div>
  
  <div class="wrapper">
    <div class="logo"><img src="/assets/svg/logo.svg" alt="Camel Cases"></div>
  </div>
</header>

<div class="site-content">
  <div class="wrapper">
    <article class="post cat-articles">
  <header class="post-header">
    <h1 class="post-title">Getting SVGWeb Load Events to Fire Consistently</h1>

    <div class="post-meta">
  <p class="publish-date">
    Published: <span class="date">April 13, 2013</span>
  </p>
</div>
  </header>
  <section class="post-body">
    <p><span data-typography='T'>The audience for this post</span> will definitely be small, but hopefully I alleviate at least one person’s frustration. I’ve used SVGWeb on a few different projects now. Its biggest advantage is that it renders your SVG creations in non-capable browsers with Flash. I’ve had very little trouble with the library except in one area: getting SVGWeb load events to fire consistently in different browsers while using an embedded SVG files.</p>

<p>Nine times out of ten everything will click just fine, and then all of a sudden… no load.<!--more--> There are detailed descriptions of a few different ways to properly initiate JavaScript in <a href="http://svgweb.googlecode.com/svn/trunk/docs/UserManual.html">SVGWeb’s documentation</a>, but the only sure fire method I’ve found is a bit of a home-brew.</p>

<p>First of all, your SVG embed looks something like this:</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='html'> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</code></pre></div></td><td class='code'><div class='highlight'><pre><span class='c'>&lt;!--[if !IE]&gt;--&gt;</span>
  <span class='nt'>&lt;object</span> <span class='na'>data=</span><span class='s'>&quot;example.svg&quot;</span> <span class='na'>type=</span><span class='s'>&quot;image/svg xml&quot;</span>
      <span class='na'>width=</span><span class='s'>&quot;1250&quot;</span> <span class='na'>height=</span><span class='s'>&quot;750&quot;</span> <span class='na'>id=</span><span class='s'>&quot;mySVGObject&quot;</span><span class='nt'>&gt;</span> 
<span class='c'>&lt;!--&lt;![endif]--&gt;</span>
<span class='c'>&lt;!--[if lt IE 9]&gt;</span>
<span class='c'>  &lt;object src=&quot;example.svg&quot; classid=&quot;image/svg xml&quot;</span>
<span class='c'>      width=&quot;1250&quot; height=&quot;750&quot; id=&quot;mySVGObject&quot;&gt;</span>
<span class='c'>&lt;![endif]--&gt;</span>
<span class='c'>&lt;!--[if gte IE 9]&gt;</span>
<span class='c'>  &lt;object data=&quot;scimitar.svg&quot; type=&quot;image/svg xml&quot;</span>
<span class='c'>      width=&quot;1250&quot; height=&quot;750&quot; id=&quot;mySVGObject&quot;&gt;</span>
<span class='c'>&lt;![endif]--&gt;</span>
    <span class='nt'>&lt;/object&gt;</span>
</pre></div>
</td></tr></table>
<p>Ugly, isn’t it? But blame IE, not SVGWeb. It’s adjusting the object for the different versions of our very favourite browser. Now, as far as I can tell, we run into trouble because sometimes it takes longer than others to load the embedded object. So we start everything off with with this trigger at the END of the SVG file right before the closing <code>&lt;/svg&gt;</code> tag.</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='html'>1
2
3</code></pre></div></td><td class='code'><div class='highlight'><pre><span class='nt'>&lt;script </span><span class='na'>type=</span><span class='s'>&quot;text/javascript&quot;</span><span class='nt'>&gt;</span><span class='o'>&lt;!</span><span class='p'>[</span><span class='nx'>CDATA</span><span class='p'>[</span>
  <span class='nb'>window</span><span class='p'>.</span><span class='nx'>parent</span><span class='p'>.</span><span class='nx'>SVGInit</span><span class='p'>();</span>
<span class='p'>]]</span><span class='o'>&gt;</span><span class='nt'>&lt;/script&gt;</span>
</pre></div>
</td></tr></table>
<p>Then somewhere in our HTML file, before our SVG embed (could be in the head), we write our <code>SVGInit()</code> function to fire a ready event. It works with jQuery as well.</p>
<table class='highlighttable'><tr><td class='linenos'><div class='linenodiv'><pre><code class='html'>1
2
3
4
5
6
7</code></pre></div></td><td class='code'><div class='highlight'><pre><span class='nt'>&lt;script&gt;</span>
  <span class='kd'>function</span> <span class='nx'>SVGInit</span><span class='p'>()</span> <span class='p'>{</span>
    <span class='nx'>$</span><span class='p'>(</span><span class='nb'>document</span><span class='p'>).</span><span class='nx'>ready</span><span class='p'>(</span><span class='kd'>function</span><span class='p'>(){</span>
      <span class='c1'>// SVG is loaded and ready.</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
<span class='nt'>&lt;/script&gt;</span>
</pre></div>
</td></tr></table>
<p>From there you’re good to go.</p>

<p>If you think that this seems convoluted and hacky and gross, that’s because it is. But, like I said, I’ve tried it pretty much every other way with no <em>consistent</em> success.</p>
  </div>
  <footer class="post-footer">
  </footer>
</article>

  </div>
</div>

  <footer class="site-footer">
    <div class="wrapper">
      <p class="copyright">&copy; <a href="http://dsundy.com">dsundy.com</a> 2014.</p>
    </div>
  </footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-21561145-3', 'camelcas.es');
  ga('send', 'pageview');
</script>

</body>
</html>